# define the root directory for development projects
hostname=`hostname`
PROJECT_NAME="spread-predictor"
VIRTUAL_DIR="/opt/python_envs/nupic/bin"


# if we're on a development system...
if [ "$hostname" = "codehammer" ] || [ "$hostname" = "joker" ];
then
    export DEV_ROOT=~/Documents/Development_Projects

else
    export DEV_ROOT=/opt
fi

export NUPIC_PROJ_HOME=$DEV_ROOT/$PROJECT_NAME
export PYTHONPATH=$NUPIC_PROJ_HOME:$PYTHONPATH

# if the 'nupic' virtual environmet exists...
if [ -d "$VIRTUAL_DIR" ]
then
    # activate Python 2.7 environment for use with Nupic
    source $VIRTUAL_DIR/activate

    # if the required Python packages are not installed...
    IS_INSTALLED=`pip show nupic | grep nupic`
    if [ -z "$IS_INSTALLED" ]
    then

        # Install the required Python packages
        echo ""
        echo "NOTE: The required Python packages were not found, installing them now..."
        echo ""
        pip install -r ./requirements.txt
        echo ""
    fi

else
    # notify the user the 'nupic' virtual environment must first
    # be created
    echo ""
    echo "ERROR: A Python virtual environment named 'nupic' could not be found."
    echo "       Create the virtual environment, then try again."
    echo ""

fi





